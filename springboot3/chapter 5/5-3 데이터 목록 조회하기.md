데이터 목록 조회하기
===

단일 데이터를 조회할 때와 다른점은 리파지터리가 엔티티를 반환했다면, 데이터 목록을 조회할 때는 묶음인 리스트를 반환합니다.

5.3.1 URL 요청받기
===

데이터 목록 조회는 localhost:8080/articles라는 URL 요청이 들어왔을 때 처리하는 것으로 하겠습니다.

controller/ArticleController.java
===

    @GetMapping("/articles/{id}")//데이터 조회  요청접수, 컨트롤러에서 URL 변수를 사용할때 중괄호 하나만 ({}) 씁니다.
    public String show(@PathVariable Long id, Model model){
    중략
    }

    
    @GetMapping("/articles")//5-3-2
    public String index(){//index 메서드에 @GetMapping("/articles")을 선언 URL 요청을 받도록 한다.
        //1.DB에서 모든 데이터 가져오기
        //2.모델에 데이터 등록하기
        //3.뷰 페이지 설정하기
        return "";
    }

5-3-2 
---

index() 메서드에 @GetMapping("/articles")를 선언해 URL 요청을 받도록 합니다.

이 요청이 들어오면 index()메서드가 수행되면서 뷰 페이지를 설정하는 코드들이 실행될 것입니다.

5.3.2데이터를 조회해 출력하기
===

    @GetMapping("/articles")//5-3-2
    public String index(){//index 메서드에 @GetMapping("/articles")을 선언 URL 요청을 받도록 한다.
        //1.DB에서 모든 데이터 가져오기
        //2.모델에 데이터 등록하기
        //3.뷰 페이지 설정하기
        return "";
    }

3단계에 나누어 코드를 작성하겠습니다.

5.3.2-1 모든 데이터 가져오기
---

DB에서 모든 데이터를 가져오려면 리파지터리가 필요합니다.

따라서 articleRepostiory를 입력하고 점(.)을 찍은 후 이번에는 findAll()이라는 메서드를 사용합니다.

findAll()은 해당 리파지터리에 있는 모든 데이터를 가져오는 메서드입니다.

메서드를 수행하는 결과는 articleEntityList라는 이름으로 받겠습니다.

ArticleEntityList의 타입은 데이터 묶음을 받아오는 것으로 List<Article>로 설정합니다.

이렇게 하면 DB에서 조회한 데이터 묶음을 리스트에 담긴 Article 타입으로 가져옵니다.

        //1. 모든 데이터 가져오기
        List<Article> articleEntityList = articleRepository.findAll();


코드를 위쪽대로 사용하면 오류가 나타나는데 마우스를 가져다 대면 findAll() -> 이 메서드가 반환하는 데이터 타입은 Iterable인데 작성한 타입은 List라서

서로 불일치하는 메시지가 나옵니다.

해결방안
---

첫번째는 캐스팅(형변화)을 하면 됩니다. Iterable, Collection, List 인터페이스의 상하관계는

![다운로드 (19)](https://github.com/user-attachments/assets/de8a5458-be18-419d-8071-253a184c82b3)

Iterable이 가장 상위의 인터페이스입니다.

캐스팅(casting)
====

캐스팅이란 데이터 타입을 변환하는 것을 말하며 형변환이라고도 합니다.

자바에서 상속 관계가 있는 특정 객체는 상황에 따라 더 넓은 범위로 해석될 수도, 때때로 좁은 범위로 해석될 수도 있습니다.

이때 넓은 범위로 해석하는것을 업캐스팅(upcasting), 좁은 범위로 해석하는 것을 다운캐스팅(downcasting)이라 합니다.

동물을 생물로 넓게 해석하는것을 업캐스팅

반대로 생물을 동물로 해석하는것을 다운캐스팅이라고 합니다.

ex)해결 코드
---

    List<Article> articleEntityList = (List<Article>)articleRepository.findAll();

Iterable을 List로 다운캐스팅해 문제해결    

두번째
===

articleEntityList의 타입을 findAll() 메서드가 반환하는 타입으로 맞추는 방법입니다.

List<Article>을 Iterable<Article>로 업캐스팅하면 오류를 해결할 수 있습니다.

ex)해결 코드
--

Iterable<Article> articleEntityList = articleRepostiory.findAll();

세번째
===

ArrayList이용 -> findAll() 메서드가 Iterable이 아닌 ArrayList를 반환하도록 수정하는것입니다.

com.example.firstproject > repository > ArticleRepository
---
        public interface ArticleRepository extends CrudRepository<Article, Long> {
        }

ArticleRepository extends CrudRepository

ArticleRepository가 CrudRepository를 상속받고 있습니다.

CrudRepository가 부모 ArticleRepository가 자식



참조자료
===

https://7772-development.tistory.com/33
